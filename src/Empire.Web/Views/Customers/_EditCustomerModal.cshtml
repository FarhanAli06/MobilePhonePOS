@model Empire.Application.DTOs.Customer.CustomerDto

<form id="editCustomerForm">
    <input type="hidden" id="editCustomerId" value="@Model.Id">
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label">First Name *</label>
                <input type="text" class="form-control" id="editFirstName" value="@Model.FirstName" required>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label">Last Name *</label>
                <input type="text" class="form-control" id="editLastName" value="@Model.LastName" required>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label">Phone *</label>
                <input type="tel" class="form-control" id="editPhone" value="@Model.Phone" required>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" id="editEmail" value="@Model.Email">
            </div>
        </div>
        <div class="col-12">
            <div class="mb-3">
                <label class="form-label">Address</label>
                <input type="text" class="form-control" id="editAddress" value="@Model.Address" placeholder="Street address">
            </div>
        </div>
        <div class="col-md-4">
            <div class="mb-3">
                <label class="form-label">City</label>
                <input type="text" class="form-control" id="editCity" value="@Model.City">
            </div>
        </div>
        <div class="col-md-4">
            <div class="mb-3">
                <label class="form-label">State</label>
                <input type="text" class="form-control" id="editState" value="@Model.State">
            </div>
        </div>
        <div class="col-md-4">
            <div class="mb-3">
                <label class="form-label">ZIP Code</label>
                <input type="text" class="form-control" id="editZipCode" value="@Model.ZipCode">
            </div>
        </div>
    </div>
</form>

<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
    <button type="button" class="btn btn-primary" onclick="updateCustomer()">
        <i class="fas fa-save me-2"></i>Update Customer
    </button>
</div>

<script>
    function updateCustomer() {
        const customerId = $('#editCustomerId').val();
        const formData = {
            FirstName: $('#editFirstName').val(),
            LastName: $('#editLastName').val(),
            Phone: $('#editPhone').val(),
            Email: $('#editEmail').val(),
            Address: $('#editAddress').val(),
            City: $('#editCity').val(),
            State: $('#editState').val(),
            ZipCode: $('#editZipCode').val()
        };

        if (!formData.FirstName || !formData.LastName || !formData.Phone) {
            alert('Please fill in all required fields (First Name, Last Name, Phone)');
            return;
        }

        $.ajax({
            url: '@Url.Action("Edit", "Customers")/' + customerId,
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(formData),
            success: function(response) {
                if (response.success) {
                    $('#editCustomerModal').modal('hide');
                    location.reload(); // Reload to show updated customer
                } else {
                    alert('Error: ' + response.message);
                }
            },
            error: function() {
                alert('Error updating customer');
            }
        });
    }
</script>

